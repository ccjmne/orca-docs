<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="../../bower_components/paper-video/paper-video.html">

<link rel="import" href="../utils/footnotes.html">
<link rel="import" href="../utils/paper-card-ripple.html">
<link rel="import" href="../utils/scroll-to.html">
<link rel="import" href="../utils/title-collapse.html">

<link rel="import" href="../shared-styles.html">

<dom-module id="orca-departments">
    <template>
        <style is="custom-style" include="shared-styles iron-flex iron-flex-alignment">
        :host {
            display: block;
        }
        </style>

        <div class="layout vertical">
            <paper-card-ripple id="overview" heading="Vue d'ensemble">
                <div class="card-content">
                    <h1>Introduction</h1>
                    <p>
                        Les <em>d&eacute;partements</em> sont l'une des ressources principales de la solution Orca. Ils permettent d'organiser les <a href="/orca-sites">sites</a> en groupes logiques.
                    </p>
                    <p>
                        Bien que correspondant souvent &agrave; un groupement par proximit&eacute; g&eacute;ographique, les d&eacute;partements peuvent &eacute;galement &ecirc;tre utilis&eacute;s afin de distinguer leurs sites selon tout autre crit&egrave;re. On peut par exemple envisager de grouper ensemble tous les &eacute;tablissements recevant du public.
                        <br />Un compte <a href="/admin-users">utilisateur</a> peut &ecirc;tre li&eacute; et attribu&eacute; &agrave; un <em>d&eacute;partement</em>.
                    </p>
                    <h1>Pr&eacute;sentation</h1>
                    <p>
                        Comme chaque <em>module de visualisation</em>, la pr&eacute;sentation des d&eacute;partements se compose de deux pages&nbsp;: celle de <em>listage</em>, et la
                        <em>fiche d&eacute;partement</em>.
                    </p>

                    <title-collapse h2 id="listing-page">
                        <span class="title">Page de listage</span>
                        <p>
                            Cette page se compose principalement d'un tableau de l'ensemble des d&eacute;partements <a href="/access">accessibles</a> &agrave; l'utilisateur. Elle int&egrave;gre les fonctionnalit&eacute;s de <a href="/orca-advanced-search">recherche avanc&eacute;e</a>, de <a href="/links">partage</a> et d'<a href="/exports">export</a>. On y retrouve, pour chaque d&eacute;partement, ses&nbsp;:
                        </p>
                        <ol type="I">
                            <li>nom</li>
                            <li>nombre de sites</li>
                            <li>nombre d'agents</li>
                        </ol>
                        <p>
                            Ansi que, pour chaque <a href="/orca-observed-certificates">aptitude observ&eacute;e</a>, selon la configuration de <a href="/orca-advanced-search">recherche avanc&eacute;e</a>&nbsp;:
                        </p>
                        <ol type="I">
                            <li>le score</li>
                            <li>le d&eacute;tail de sa cible pour chacun des sites</li>
                            <li>le taux d'agents form&eacute;s</li>
                            <li>le nombre d'agents form&eacute;s</li>
                        </ol>
                        <scroll-to target="#score">Score aptitude d'un d&eacute;partement</scroll-to>
                    </title-collapse>

                    <title-collapse h2 id="department-page">
                        <span class="title">Fiche d&eacute;partement</span>
                        <p>
                            La fiche d'un d&eacute;partement se compose des deux &eacute;l&eacute;ments que sont son <em>tableau de bord</em> et la liste de ses sites. Elle int&egrave;gre &eacute;galement la fonctionnalit&eacute; d'<a href="/exports">export</a>.
                        </p>
                        <h3 class="layout horizontal center">Tableau de bord<hr class="flex" /></h3>
                        <p>
                            Le tableau de bord concentre l'int&eacute;gralit&eacute; des informations du d&eacute;partement&nbsp;:
                        </p>
                        <ol type="I">
                            <li>son nombre de sites</li>
                            <li>son nombre d'agents &mdash; et sa d&eacute;composition en agents permanents et temporaires</li>
                            <li>les &eacute;ventuelles notes prises le concernant</li>
                            <li>la derni&egrave;re date de mise &agrave; jour des affectations de ses agents</li>
                        </ol>
                        <p>
                            Puis, pour chaque <a href="/orca-observed-certificates">aptitude observ&eacute;e</a>&nbsp;:
                        </p>
                        <ol type="I">
                            <li>son score</li>
                            <li>le d&eacute;tail de ses cibles</li>
                            <li>son nombre (et taux) d'agents form&eacute;s</li>
                        </ol>
                        <p>
                            Enfin, le tableau de bord peut s'&eacute;tendre pour proposer un historique suivant l'&eacute;volution des scores du d&eacute;partement.
                        </p>
                        <scroll-to target="#score">Score aptitude d'un d&eacute;partement</scroll-to>
                        <scroll-to target="#history">Historique d'un d&eacute;partement</scroll-to>
                        <h3 class="layout horizontal center">Liste des sites<hr class="flex" /></h3>
                        <p>
                            La liste des sites d'un d&eacute;partement contient certaines informations pour chacun d'entre eux&nbsp;:
                        </p>
                        <ol type="I">
                            <li>le nom</li>
                            <li>le nombre d'agents</li>
                            <li>le taux d'agent form&eacute;s &agrave; chaque <a href="/orca-observed-certificates">aptitude observ&eacute;e</a></li>
                        </ol>
                        <p>
                            La <a href="/orca-advanced-search">recherche avanc&eacute;e</a> n'est pas disponible pour cette liste. Cliquer sur l'un de ces sites ouvre la fiche de celui-ci.
                        </p>
                    </title-collapse>
                </div>
            </paper-card-ripple>

            <paper-card-ripple id="history" heading="Historique d'un d&eacute;partement">
                <div class="card-content">
                    <p>
                        L'historique est un outil permettant de visualiser, &agrave; l'aide d'un graphique simple, l'&eacute;volution de la satisfaction de la cible d'une aptitude au cours du temps.
                    </p>
                    <h1>Utilisation</h1>
                    <p>
                        Deux donn&eacute;es configurent la vue de l'historique&nbsp;: la date de d&eacute;but et l'aptitude concern&eacute;e. L'historique pr&eacute;sente les donn&eacute;es pour l'aptitude s&eacute;lectionn&eacute;e sur toute la p&eacute;riode depuis la date choisie jusqu'aujourd'hui &mdash; avec un relev&eacute; chaque mois.
                    </p>
                    <p>
                        Le graphique utilis&eacute; est interactif et passer la souris au-dessus de celui-ci permet de focaliser la vue sur un relev&eacute; particulier et de visualiser le d&eacute;tail des cibles &agrave; la date correspondante.</p>
                    <hr />
                    <p>
                        Chaque relev&eacute; pr&eacute;sente le <em>d&eacute;tail</em> de la cible d'une aptitude &agrave; une certaine date, lequel se d&eacute;compose en trois &eacute;l&eacute;ments&nbsp;:
                    </p>
                    <ol type="I">
                        <li>le nombre de sites pour lesquels la cible est atteinte</li>
                        <li>le nombre de sites pour lesquels la cible est <span class="quote">presque atteinte</span> (aux deux tiers)</li>
                        <li>le nombre de sites pour lesquels la cible n'est pas atteinte &mdash; &agrave; moins de deux tiers</li>
                    </ol>
                    <p>
                        Dans la vid&eacute;o de d&eacute;monstration ci-dessous, l'utilisateur consulte l'historique des statistiques d'un d&eacute;partement.
                    </p>
                </div>
                <div class="img border-top">
                    <paper-video controls preload="auto" src="../../assets/orca-departments/history.webm" autohide-controls="500" height="600"></paper-video>
                </div>
            </paper-card-ripple>

            <paper-card-ripple id="score" heading="Score aptitude d'un d&eacute;partement">
                <div class="card-content">
                    <p>
                        Pour un d&eacute;partement, son <em>score</em> est un taux, en pourcents, qui concerne une aptitude. Il est directement calcul&eacute; selon la validation de l'aptitude en question par
                        <footnote-needed ref="1" numeric>l'ensemble de ses sites</footnote-needed>.
                    </p>
                    <p>
                        Chacun de ses sites a le potentiel de combler une fraction de ce score, plus ou moins grande selon le nombre de ses sites. Ils contribuent &agrave; leur fraction selon leur
                        <footnote-needed ref="2" numeric>indice de r&eacute;alisation de la cible</footnote-needed> assign&eacute;e &agrave; l'aptitude concern&eacute;e&nbsp;:
                    </p>
                    <ol type="I">
                        <li>cible site <span class="label label-success">atteinte</span>&nbsp;: fraction remplie &agrave; 100%</li>
                        <li>cible site <span class="label label-warning">presque atteinte</span>&nbsp;: fraction remplie aux deux tiers</li>
                        <li>cible site <span class="label label-danger">non atteinte</span> (moins de &frac23;)&nbsp;: fraction enti&egrave;rement vide</li>
                    </ol>
                    <footnote-refs>
                        <footnote-ref ref="1" numeric>
                            Il n'y a pas de distinction ni m&ecirc;me de pond&eacute;ration intervenant dans la contribution de chaque site selon tout crit&egrave;re comme leur nombre d'agents.
                        </footnote-ref>
                        <footnote-ref ref="2" numeric>
                            La <a href="/admin-certificates">gestion des aptitudes</a> permet d'&eacute;tablir un taux <em>cible</em> de l'effectif de chaque site &agrave; maintenir en comp&eacute;tence. Chaque site ainsi atteint <em>plus ou moins</em> la cible fix&eacute;e.
                        </footnote-ref>
                    </footnote-refs>
                    <scroll-to target="/orca-sites#site-page">Fiche site &mdash; Tableau de bord</scroll-to>
                    <p>
                        Les contributions de l'ensemble des sites de chaque d&eacute;partment sont ainsi compil&eacute;es et un score est obtenu. Il est accompagn&eacute; d'un badge dont le code couleur se d&eacute;cline comme suit&nbsp;:
                    </p>
                    <ol type="I">
                        <li><span class="label label-success">vert</span>&nbsp;: 100% &mdash; tous les sites de ce d&eacute;partement atteignent la cible fix&eacute;e</li>
                        <li><span class="label label-warning">orange</span>&nbsp;: &agrave; partir de 67%</li>
                        <li><span class="label label-danger">rouge</span>&nbsp;: jusqu'&agrave; 66%</li>
                    </ol>
                </div>
            </paper-card-ripple>
        </div>
    </template>

    <script>
    Polymer({
        is: 'orca-departments'
    });
    </script>
</dom-module>
